const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Cf5EZ69e.js","./2MKN5o9I.js","./entry.B3X56HoU.css","./00KrcxL-.js"])))=>i.map(i=>d[i]);
import{R as j,S as R,_ as U}from"#entry";import{t as W,f as k}from"./00KrcxL-.js";const $=(e,s)=>{const n=e._conditions;return n.length>0?`(${n.join(` ${s} `)})`:""},C=e=>{const s=[],n={_conditions:s,where(r,i,t){let o;switch(i.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(t)){const u=t.map(p=>g(p)).join(", ");o=`"${String(r)}" ${i.toUpperCase()} (${u})`}else throw new TypeError(`Value for ${i} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(t)&&t.length===2)o=`"${String(r)}" ${i.toUpperCase()} ${g(t[0])} AND ${g(t[1])}`;else throw new Error(`Value for ${i} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":o=`"${String(r)}" ${i.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":o=`"${String(r)}" ${i.toUpperCase()} ${g(t)}`;break;default:o=`"${String(r)}" ${i} ${g(typeof t=="boolean"?Number(t):t)}`}return s.push(`${o}`),n},andWhere(r){const i=r(C());return s.push($(i,"AND")),n},orWhere(r){const i=r(C());return s.push($(i,"OR")),n}};return n},B=(e,s)=>{const n={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},r={__params:n,andWhere(t){const o=t(C());return n.conditions.push($(o,"AND")),r},orWhere(t){const o=t(C());return n.conditions.push($(o,"OR")),r},path(t){return r.where("path","=",j(t))},skip(t){return n.offset=t,r},where(t,o,u){return r.andWhere(p=>p.where(String(t),o,u)),r},limit(t){return n.limit=t,r},select(...t){return t.length&&n.selectedFields.push(...t),r},order(t,o){return n.orderBy.push(`"${String(t)}" ${o}`),r},async all(){return s(e,i()).then(t=>t||[])},async first(){return s(e,i({limit:1})).then(t=>t[0]||null)},async count(t="*",o=!1){return s(e,i({count:{field:String(t),distinct:o}})).then(u=>u[0].count)}};function i(t={}){let o="SELECT ";if(t?.count)o+=`COUNT(${t.count.distinct?"DISTINCT ":""}${t.count.field}) as count`;else{const p=Array.from(new Set(n.selectedFields));o+=p.length>0?p.map(a=>`"${String(a)}"`).join(", "):"*"}o+=` FROM ${W[String(e)]}`,n.conditions.length>0&&(o+=` WHERE ${n.conditions.join(" AND ")}`),n.orderBy.length>0?o+=` ORDER BY ${n.orderBy.join(", ")}`:o+=" ORDER BY stem ASC";const u=t?.limit||n.limit;return u>0&&(n.offset>0?o+=` LIMIT ${u} OFFSET ${n.offset}`:o+=` LIMIT ${u}`),o}return r};function g(e){return`'${String(e).replace(/'/g,"''")}'`}const D=/\d/,x=["-","_","/","."];function P(e=""){if(!D.test(e))return e!==e.toLowerCase()}function _(e,s){const n=x,r=[];if(!e||typeof e!="string")return r;let i="",t,o;for(const u of e){const p=n.includes(u);if(p===!0){r.push(i),i="",t=void 0;continue}const a=P(u);if(o===!1){if(t===!1&&a===!0){r.push(i),i=u,t=a;continue}if(t===!0&&a===!1&&i.length>1){const l=i.at(-1);r.push(i.slice(0,Math.max(0,i.length-1))),i=l+u,t=a;continue}}i+=u,t=a,o=p}return r.push(i),r}function F(e){return e?e[0].toUpperCase()+e.slice(1):""}function Q(e,s){return e?(Array.isArray(e)?e:_(e)).map(n=>F(s?.normalize?n.toLowerCase():n)).join(""):""}function J(e,s){return e?(Array.isArray(e)?e:_(e)).map(n=>n.toLowerCase()).join("-"):""}function I(e){return s=>(s=s||{},(e||[]).filter(n=>typeof s[n]<"u").reduce((n,r)=>Object.assign(n,{[r]:s[r]}),{}))}async function q(e,s=[]){e.__params?.orderBy?.length||(e=e.order("stem","ASC"));const r=await e.orWhere(a=>a.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...s||[]).all(),{contents:i,configs:t}=r.reduce((a,l)=>{if(String(l.stem).split("/").pop()===".navigation"){l.title=l.title?.toLowerCase()==="navigation"?"":l.title;const d=l.path.split("/").slice(0,-1).join("/")||"/";a.configs[d]={...l,...l.body}}else a.contents.push(l);return a},{configs:{},contents:[]}),o=a=>({...I(["title",...s])(a),...a.meta,...O(a?.navigation)?a.navigation:{}}),u=a=>({...I(["title",...s])(a),...O(a?.navigation)?a.navigation:{}}),p=i.reduce((a,l)=>{const d=l.path.substring(1).split("/"),b=l.stem.split("/"),E=!!b[b.length-1]?.match(/([1-9]\d*\.)?index/g),T=c=>({title:c.title,path:c.path,stem:c.stem,children:[],...u(c)}),h=T(l);if(E){const c=t[h.path];if(typeof c?.navigation<"u"&&c?.navigation===!1)return a;if(l.path!=="/"){const f=T(l);h.children.push(f)}c&&Object.assign(h,o(c))}if(d.length===1){const c=a.find(f=>f.path===h.path&&f.page===!1);return E&&c?Object.assign(c,{page:void 0,children:[...h.children||[],...c.children||[]]}):a.push(h),a}const A=d.slice(0,-1).reduce((c,f,v)=>{const N="/"+d.slice(0,v+1).join("/"),m=t[N];if(typeof m?.navigation<"u"&&m.navigation===!1)return[];let y=c.find(S=>S.path===N);if(!y){const S=m?o(m):{};y={...S,title:S.title||M(f),path:N,stem:b.slice(0,v+1).join("/"),children:[],page:!1},c.push(y)}return y.children},a),w=A.find(c=>c.path===h.path&&c.page===!1);return w?Object.assign(w,{...h,page:void 0,children:[...h.children||[],...w.children||[]]}):A.push(h),a},[]);return L(p)}function L(e){const s=e;for(const n of s)n.children?.length?L(n.children):delete n.children;return e}function O(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const M=e=>e.split(/[\s-]/g).map(Q).join(" "),V=e=>{const s=R()?.ssrContext?.event;return B(e,(n,r)=>G(s,n,r))};function X(e,s){return K(e,n=>q(n,s))}async function G(e,s,n){return window.WebAssembly?H(s,n):k(e,String(s),n)}async function H(e,s){return await U(()=>import("./Cf5EZ69e.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(r=>r.loadDatabaseAdapter(e)).then(r=>r.all(s))}function K(e,s){const n=V(e),r={where(i,t,o){return n.where(String(i),t,o),r},andWhere(i){return n.andWhere(i),r},orWhere(i){return n.orWhere(i),r},order(i,t){return n.order(String(i),t),r},then(i,t){return s(n).then(i,t)},catch(i){return this.then(void 0,i)},finally(i){return this.then(void 0,void 0).finally(i)},get[Symbol.toStringTag](){return"Promise"}};return r}export{V as a,J as k,Q as p,X as q};
